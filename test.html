<!DOCTYPE html>
<html>
<head>
<script src="src/object.js"></script>
<script src="src/function.js"></script>
<script src="src/jcon.js"></script>
</head>
<body>
<script>



    var inputs = '11221133114411561155';        //11dd

    var parse11 = jcon.string('11');
    var parsedd = jcon.regex(/((\d)\2)/);

    parser11dd = parse11.seq(parsedd).join();

    console.log(parser11dd.parse(inputs, 0));          //1122
    console.log(parser11dd.parse(inputs, 4));          //1133
    console.log(parser11dd.parse(inputs, 8));          //1144
    console.log(parser11dd.parse(inputs, 12));         //unexcepted


    var parseUntil = jcon.until(function(chr){
        return parseInt(chr,10) < 6;
    }).join();

    console.log( parseUntil.parse(inputs, 12) );

    var parseLazy = jcon.lazy(function(){
        if(confirm('是否要parse 115?')){
            return parseUntil;
        }else{
            return jcon.fail('xx');
        }
    });

    console.log(parseLazy.parse(inputs, 12));


    parser11dd_time2 = parser11dd.times( 0, 2).join();

    console.log(parser11dd_time2.parse(inputs, 0));

    console.log( jcon.string('abc').seq(jcon.regex(/\d\d\d/)).join().times(0,2).join().parse('abc123abc456',0) );




    var left = jcon.string('(');
    var right = jcon.string(')');

    var bracketOpt = jcon.lazy(function(){
        return bracket.or(jcon.string(''));
    }).join();

    bracket = left.seq(bracketOpt, right);


    console.log(bracketOpt.parse('(((())))',0));

</script>
</body>
</html>
